{"version":3,"sources":["../../../src/create-theme-vars/calc.ts"],"names":["isObject","resolveReference","operand","reference","String","toExpression","operator","operands","map","join","replace","add","subtract","multiply","divide","negate","x","value","Number","isNaN","parseFloat","startsWith","slice","calc","Object","assign","toString"],"mappings":"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","sourcesContent":["/**\n * Thank you @markdalgleish for this piece of art!\n */\nimport { isObject } from \"@vechaiui/utils\";\n\nexport type Operand = string | number | { reference: string };\ntype Operator = \"+\" | \"-\" | \"*\" | \"/\";\n\nfunction resolveReference(operand: Operand): string {\n  if (isObject(operand) && operand.reference) {\n    return operand.reference;\n  }\n  return String(operand);\n}\n\nconst toExpression = (operator: Operator, ...operands: Array<Operand>) =>\n  operands.map(resolveReference).join(` ${operator} `).replace(/calc/g, \"\");\n\nconst add = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"+\", ...operands)})`;\n\nconst subtract = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"-\", ...operands)})`;\n\nconst multiply = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"*\", ...operands)})`;\n\nconst divide = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"/\", ...operands)})`;\n\nconst negate = (x: Operand) => {\n  const value = resolveReference(x);\n\n  if (value != null && !Number.isNaN(parseFloat(value))) {\n    return String(value).startsWith(\"-\") ? String(value).slice(1) : `-${value}`;\n  }\n\n  return multiply(value, -1);\n};\n\ninterface CalcChain {\n  add: (...operands: Array<Operand>) => CalcChain;\n  subtract: (...operands: Array<Operand>) => CalcChain;\n  multiply: (...operands: Array<Operand>) => CalcChain;\n  divide: (...operands: Array<Operand>) => CalcChain;\n  negate: () => CalcChain;\n  toString: () => string;\n}\n\nexport const calc = Object.assign(\n  (x: Operand): CalcChain => ({\n    add: (...operands) => calc(add(x, ...operands)),\n    subtract: (...operands) => calc(subtract(x, ...operands)),\n    multiply: (...operands) => calc(multiply(x, ...operands)),\n    divide: (...operands) => calc(divide(x, ...operands)),\n    negate: () => calc(negate(x)),\n    toString: () => x.toString(),\n  }),\n  {\n    add,\n    subtract,\n    multiply,\n    divide,\n    negate,\n  }\n);\n"],"file":"calc.js"}